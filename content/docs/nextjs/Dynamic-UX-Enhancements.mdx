---
title: "Next.js Server Actions (Dynamic UX Enhancements)"
description: "React client components á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€¼á€®á€¸ UX á€á€­á€¯á€¸á€á€€á€ºá€¡á€±á€¬á€„á€ºá€•á€¼á€¯á€œá€¯á€•á€ºá€á€¼á€„á€ºá€¸ "
---

## âœ… UX á€€á€­á€¯ á€á€­á€¯á€¸á€á€€á€ºá€¡á€±á€¬á€„á€ºá€•á€¼á€¯á€œá€¯á€•á€ºá€–á€­á€¯á€·

Form á€‘á€²á€™á€¾á€¬ submit á€œá€¯á€•á€ºá€á€²á€·á€¡á€á€»á€­á€”á€ºá€™á€¾á€¬ -

1. Button á€€á€­á€¯ pending state á€–á€¼á€…á€ºá€¡á€±á€¬á€„á€ºá€•á€¼á€±á€¬á€„á€ºá€¸á€•á€¼á€á€á€»á€„á€ºá€á€šá€ºá‹
2. Submit á€–á€¼á€…á€ºá€•á€¼á€®á€¸á€á€¬á€”á€²á€· Success/Error message á€•á€¼á€á€»á€„á€ºá€á€šá€ºá‹

á€’á€«á€€á€¼á€±á€¬á€„á€·á€º Client Component (React Component) á€•á€¼á€±á€¬á€„á€ºá€¸á€–á€­á€¯á€·á€œá€­á€¯á€•á€«á€á€šá€ºá‹

---

## ğŸ” `useFormStatus` Hook á€á€¯á€¶á€¸á€•á€¼á€®á€¸ Pending State á€•á€¼á€›á€”á€º

### âœ… Step-by-Step:

1. `SubmitButton` Component á€¡á€á€…á€ºá€á€…á€ºá€á€¯á€–á€”á€ºá€á€®á€¸á€•á€«á‹
2. `useFormStatus` á€€á€­á€¯á€¡á€á€½á€„á€ºá€¸á€™á€¾á€¬á€á€¯á€¶á€¸á€•á€«á‹
3. `pending` value á€€á€­á€¯ destructure á€œá€¯á€•á€ºá€•á€¼á€®á€¸ button á€€á€­á€¯ disabled á€œá€¯á€•á€ºá€•á€«á‹

```tsx
"use client";
import { useFormStatus } from "react-dom";

function SubmitButton() {
  const { pending } = useFormStatus();

  return (
    <button type="submit" disabled={pending} className="btn">
      {pending ? "Submitting..." : "Submit"}
    </button>
  );
}
```

4. Form á€‘á€²á€™á€¾á€¬ `<SubmitButton />` á€€á€­á€¯ render á€œá€¯á€•á€ºá€•á€«á‹

---

## âš™ï¸ Delay á€‘á€Šá€·á€ºá€á€¼á€„á€ºá€¸ (Testing UI)

Server Action á€‘á€²á€™á€¾á€¬ `await new Promise(resolve => setTimeout(resolve, 3000));` á€€á€­á€¯á€‘á€Šá€·á€ºá€•á€¼á€®á€¸ delay á€œá€¯á€•á€ºá€œá€­á€¯á€·á€›á€•á€«á€á€šá€ºá‹

---

## ğŸš« `redirect()` á€™á€á€¯á€¶á€¸á€á€±á€¬á€·á€˜á€² `revalidatePath()` á€á€¯á€¶á€¸á€á€¼á€„á€ºá€¸

```tsx
import { revalidatePath } from "next/cache";

try {
  await saveUser(data);
  revalidatePath("/actions");
  return "User created successfully";
} catch (error) {
  return "Failed to create user";
}
```

---

## âœ… `useFormState` á€á€¯á€¶á€¸á€•á€¼á€®á€¸ Message á€•á€¼á€›á€”á€º

### Step-by-step

1. Form á€‘á€²á€™á€¾á€¬ `useFormState(createUser, null)` á€á€¯á€¶á€¸á€•á€«á‹

```tsx
const [message, formAction] = useFormState(createUser, null);
```

2. `formAction` á€€á€­á€¯ `<form action={formAction}>` á€¡á€–á€¼á€…á€ºá€á€¯á€¶á€¸á€•á€«á‹
3. `createUser` function á€‘á€²á€™á€¾á€¬ return value á€•á€¼á€”á€ºá€•á€±á€¸á€•á€«á‹

```tsx
export async function createUser(prevState: any, formData: FormData) {
  try {
    // logic to save user
    await revalidatePath("/actions");
    return "User created successfully";
  } catch (err) {
    return "Failed to create user";
  }
}
```

4. UI á€™á€¾á€¬ `message` á€€á€­á€¯á€•á€¼á€•á€«á‹

```tsx
{
  message && <p>{message}</p>;
}
```

---

## â— Structure á€€á€­á€¯ á€‚á€›á€¯á€•á€¼á€¯á€•á€«

- Initial state = `null` á€–á€¼á€…á€ºá€œá€»á€¾á€„á€º return value á€á€½á€±á€€ string á€–á€¼á€…á€ºá€–á€­á€¯á€·á€œá€­á€¯á€á€šá€ºá‹
- Initial state = `{ message: '' }` á€–á€¼á€…á€ºá€œá€»á€¾á€„á€º return value á€á€½á€±á€œá€Šá€ºá€¸ object format á€–á€¼á€…á€ºá€–á€­á€¯á€·á€œá€­á€¯á€á€šá€ºá‹

---

## âœ… á€¡á€€á€»á€‰á€ºá€¸á€á€»á€¯á€•á€º (Summary)

- UX á€á€­á€¯á€¸á€á€€á€ºá€¡á€±á€¬á€„á€º React Client Component á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€«á‹
- SubmitButton á€€á€­á€¯ `useFormStatus()` á€”á€²á€· pending state á€•á€¼á€•á€«á‹
- `useFormState()` á€á€¯á€¶á€¸á€•á€¼á€®á€¸ Success/Error message á€•á€¼á€•á€«á‹
- `redirect()` á€™á€á€¯á€¶á€¸á€á€±á€¬á€·á€•á€² `revalidatePath()` á€á€¯á€¶á€¸á€á€¼á€„á€ºá€¸á€€á€•á€­á€¯á€á€„á€·á€ºá€á€±á€¬á€ºá€á€šá€ºá‹

---

## ğŸ—‘ï¸ Delete Button Component á€á€Šá€ºá€†á€±á€¬á€€á€ºá€á€¼á€„á€ºá€¸

- Delete functionality á€–á€¼á€„á€·á€º server actions á€™á€¾á€¬ data binding á€”á€¾á€…á€ºá€™á€»á€­á€¯á€¸ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€”á€Šá€ºá€¸

### `deletebutton.tsx`

```tsx
import { deleteUser, removeUser } from "./actions";

type Props = { id: string };

export function DeleteButton({ id }: Props) {
  // Option 1: Using form input (visible in HTML)
  // return (
  //   <form action={deleteUser}>
  //     <input type="hidden" name="id" value={id} />
  //     <button type="submit" className="bg-red-500 text-white text-xs rounded p-2">
  //       Delete
  //     </button>
  //   </form>
  // );

  // Option 2: Using bind (ID hidden from HTML)
  const removeUserWithId = removeUser.bind(null, id);
  return (
    <form action={removeUserWithId}>
      <input type="hidden" name="name" value="shake and bake" />
      <button
        type="submit"
        className="bg-red-500 text-white text-xs rounded p-2"
      >
        Delete
      </button>
    </form>
  );
}
```

---

### ğŸ§± Users List á€™á€¾á€¬ Delete Button á€‘á€Šá€·á€ºá€á€¼á€„á€ºá€¸

```tsx
<article key={user.id}>
  <h4 className="flex justify-between items-center mb-2">
    {user.name} <DeleteButton id={user.id} />
  </h4>
</article>
```

---

### âš™ï¸ Server Action (Option 1: input type=â€œhiddenâ€)

```ts
export async function deleteUser(formData: FormData) {
  const id = formData.get("id") as string;
  const users = await getUsers();
  const updatedUsers = users.filter((user) => user.id !== id);
  await saveUsers(updatedUsers);
  revalidatePath("/actions");
}
```

---

â— Note:

- User ID á€á€Šá€º HTML á€‘á€²á€™á€¾á€¬ á€á€­á€¯á€€á€ºá€›á€­á€¯á€€á€ºá€–á€±á€¬á€ºá€•á€¼á€œá€­á€™á€·á€ºá€™á€Šá€ºá‹
- Security-sensitive á€–á€¼á€…á€ºá€”á€­á€¯á€„á€ºá€á€±á€¬ use case á€™á€»á€¬á€¸á€á€½á€„á€º á€™á€á€„á€·á€ºá€á€±á€¬á€ºá€•á€«á‹

---

### âš™ï¸ Server Action (Option 2: bind method)

```ts
export async function removeUser(id: string, formData: FormData) {
  const name = formData.get("name") as string;
  console.log(name); // should log "shake and bake"

  const users = await getUsers();
  const updatedUsers = users.filter((user) => user.id !== id);
  await saveUsers(updatedUsers);
  revalidatePath("/actions");
}
```

#### âœ… Advantage:

â€¢ User ID á€á€Šá€º HTML á€‘á€²á€™á€¾á€¬á€™á€•á€«á€á€„á€ºá€•á€«á‹
â€¢ Bind method á€á€¯á€¶á€¸á€á€¼á€„á€ºá€¸á€–á€¼á€„á€·á€º more secure (for front-end exposure)

---

### ğŸ§  Summary (á€”á€­á€‚á€¯á€¶á€¸á€á€»á€¯á€•á€º)

- âœ… deleteUser() = input hidden field á€–á€¼á€„á€·á€º value á€•á€±á€¸á€á€¼á€„á€ºá€¸

- âœ… removeUser() = bind method á€–á€¼á€„á€·á€º server action á€á€­á€¯á€· data á€•á€±á€¸á€á€¼á€„á€ºá€¸

- â— Bind method á€á€Šá€º value á€™á€»á€¬á€¸á€€á€­á€¯ HTML á€™á€¾á€¬á€–á€±á€¬á€ºá€•á€¼á€…á€›á€¬á€™á€œá€­á€¯á€á€±á€¬á€·á€á€–á€¼á€„á€·á€º á€•á€­á€¯á€™á€­á€¯á€œá€¯á€¶á€á€¼á€¯á€¶á€á€Šá€º

---
